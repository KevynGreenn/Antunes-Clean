<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Finalizar Compra - Antunes Clean</title>
    <link rel="stylesheet" href="style.css">
    <link rel="stylesheet" href="carrinho.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.2/css/all.min.css">
    <link rel="icon" type="image/png" href="imagens/aaa.png">
</head>
<body>
    <script>
        (function() {
            const theme = localStorage.getItem('theme');
            if (theme === 'dark') {
                document.body.classList.add('dark-mode');
            }
        })();
    </script>

    <header class="header">
        <div class="container">
            <a href="index.html" class="logo">Antunes Clean</a>
            <nav class="nav-menu">
                <a href="index.html">Home</a>
                <a href="produtos.html">Produtos</a>
            </nav>
            <div class="header-icons">
                <button class="theme-toggle" id="theme-toggle" title="Alterar tema">
                    <i class="fas fa-moon"></i>
                    <i class="fas fa-sun"></i>
                </button>
                <button class="hamburger" id="hamburger">
                    <i class="fas fa-bars"></i>
                </button>
            </div>
        </div>
    </header>

    <main class="checkout-page">
        <div id="cart-container" class="checkout-container">
            <div class="info-section">
                <h3>Informações de Contato e Entrega</h3>
                <form id="checkout-form">
                    <div class="form-group">
                        <label for="name">Nome Completo (Titular da conta PIX) *</label>
                        <input type="text" id="name" required placeholder="Insira o nome de quem fará o pagamento">
                    </div>
                    <div class="form-group">
                        <label for="phone">Telefone / WhatsApp *</label>
                        <input type="tel" id="phone" placeholder="(00) 00000-0000" required>
                    </div>
                    <div class="form-group">
                        <label for="address">Endereço Completo (Rua, Nº, Bairro) *</label>
                        <input type="text" id="address" required>
                    </div>
                     <div class="form-group">
                        <label for="reference">Ponto de Referência (Opcional)</label>
                        <input type="text" id="reference">
                    </div>
                    
                    <p class="pix-warning-text">Atenção: O pagamento deve ser feito por uma conta PIX com o mesmo nome informado acima para a validação do pedido.</p>

                    <button type="submit" class="btn btn-full">
                        <i class="fas fa-dollar-sign"></i> Gerar PIX para Pagamento
                    </button>
                </form>
            </div>

            <aside class="order-summary-section">
                <h4>Resumo do Pedido</h4>
                <div id="summary-items-list"></div>
                <div class="summary-totals">
                    <div class="summary-line">
                        <span>Subtotal</span>
                        <span id="summary-subtotal">R$0.00</span>
                    </div>
                    <div class="summary-line total">
                        <span>Total</span>
                        <span id="summary-total">R$0.00</span>
                    </div>
                </div>
                <button id="clear-cart-btn" class="btn btn-clear-cart">Limpar Carrinho</button>
                 <div class="continue-shopping">
                    <a href="produtos.html" class="continue-shopping-link">Continuar comprando</a>
                </div>
            </aside>

        </div>

        <div id="pix-payment-section" class="pix-payment-container" style="display: none;">
            <h3>Pague com PIX para Finalizar</h3>
            <p>Escaneie o QR Code abaixo com o app do seu banco.</p>
            <div id="pix-qrcode-container"></div>
            <p>Ou use o PIX Copia e Cola:</p>
            <textarea id="pix-copy-paste" readonly></textarea>
            <button id="copy-pix-btn" class="btn"><i class="fas fa-copy"></i> Copiar Código</button>
            <div class="whatsapp-instruction">
                <p>Após o pagamento, clique no botão abaixo para nos enviar o comprovante via WhatsApp e agilizar a sua entrega!</p>
                <button id="send-receipt-btn" class="btn btn-full">
                    <i class="fab fa-whatsapp"></i> Enviar Comprovante
                </button>
            </div>
        </div>

        <div id="empty-cart-message" class="empty-cart-message" style="display: none;">
            <h2>Seu carrinho está vazio</h2>
            <p>Adicione produtos ao seu carrinho para poder finalizar a compra.</p>
            <a href="produtos.html" class="btn">Ver Produtos</a>
        </div>
    </main>
    
    <footer class="footer-section">
        <div class="container">
            <p>&copy; 2025 Antunes Clean. Todos os direitos reservados.</p>
            <p>Três Lagoas - MS</p>
        </div>
    </footer>

    <div id="confirmation-modal" class="modal-overlay" style="display: none;">
        <div class="modal-content">
            <h4>Confirmar Ação</h4>
            <p>Tem certeza que deseja remover todos os itens do carrinho?</p>
            <div class="modal-actions">
                <button id="confirm-clear-btn" class="btn btn-danger">Sim, Limpar</button>
                <button id="cancel-clear-btn" class="btn btn-secondary">Cancelar</button>
            </div>
        </div>
    </div>
    
    <div id="notification" class="notification"></div>
    <script src="https://cdn.rawgit.com/davidshimjs/qrcodejs/gh-pages/qrcode.min.js"></script>
    <script src="https://unpkg.com/imask"></script>
    <script src="script.js"></script>
    <script src="carrinho.js"></script>
</body>
</html>